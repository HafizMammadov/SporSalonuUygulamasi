@{
    ViewData["Title"] = "Giriş ve Kayıt";
}

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-6">

            <ul class="nav nav-pills nav-justified mb-3" id="pills-tab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active fw-bold" id="pills-login-tab" data-bs-toggle="pill" data-bs-target="#pills-login" type="button" role="tab" aria-controls="pills-login" aria-selected="true">Giriş Yap</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link fw-bold" id="pills-register-tab" data-bs-toggle="pill" data-bs-target="#pills-register" type="button" role="tab" aria-controls="pills-register" aria-selected="false">Kayıt Ol</button>
                </li>
            </ul>

            <div class="tab-content" id="pills-tabContent">

                <div class="tab-pane fade show active" id="pills-login" role="tabpanel" aria-labelledby="pills-login-tab">
                    <div class="card shadow p-4 border-0">
                        <h3 class="text-center text-primary mb-4">Hos Geldiniz</h3>
                        @if (!ViewData.ModelState.IsValid)
                        {
                            <div class="alert alert-danger" role="alert">
                                <i class="bi bi-exclamation-triangle-fill"></i>
                                <strong>Hata!</strong> Email veya sifre yanlis. Lutfen bilgilerinizi kontrol edin.
                            </div>
                        }
                        <form method="post" action="/Account/Login">
                            <div class="mb-3">
                                <label class="form-label">Email Adresi</label>
                                <input type="email" name="Email" class="form-control" placeholder="ogrencinumarasi@sakarya.edu.tr" required />
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Şifre</label>
                                <input type="password" name="Password" class="form-control" placeholder="sau" required />
                            </div>
                            <div class="mb-3 form-check">
                                <input type="checkbox" class="form-check-input" id="rememberMe" name="RememberMe" value="true">
                                <label class="form-check-label" for="rememberMe">Beni Hatırla</label>
                            </div>
                            <button type="submit" class="btn btn-primary w-100 py-2">Giriş Yap</button>
                        </form>

                        <div class="alert alert-light border mt-3 text-center">
                            <small class="text-muted">Admin: ogrencinumarasi@sakarya.edu.tr | Şifre: sau</small>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="pills-register" role="tabpanel" aria-labelledby="pills-register-tab">
                    <div class="card shadow p-4 border-0">
                        <h3 class="text-center text-success mb-4">Yeni Hesap Olustur</h3>
                        <form method="post" action="/Account/Register" id="registerForm" onsubmit="return validateRegisterForm()">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Ad</label>
                                    <input type="text" name="Ad" class="form-control" required />
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Soyad</label>
                                    <input type="text" name="Soyad" class="form-control" required />
                                </div>
                            </div>

                            <div class="mb-3">
                                <label class="form-label">Email Adresi</label>
                                <input type="email" name="Email" class="form-control" required />
                            </div>

                            <div class="mb-3">
                                <label class="form-label">Sifre</label>
                                <input type="password" name="Password" id="regPassword" class="form-control" required />
                                <div id="passwordError" class="text-danger small mt-1" style="display:none;">
                                    <i class="bi bi-exclamation-circle"></i> Sifre en az 8 karakter uzunlugunda olmalidir!
                                </div>
                            </div>

                            <div class="mb-3">
                                <label class="form-label">Sifre Tekrar</label>
                                <input type="password" name="ConfirmPassword" id="regConfirmPassword" class="form-control" required />
                                <div id="confirmPasswordError" class="text-danger small mt-1" style="display:none;">
                                    <i class="bi bi-exclamation-circle"></i> Sifre ve Sifre Tekrari ayni olmalidir!
                                </div>
                            </div>

                            <button type="submit" class="btn btn-success w-100 py-2">Kayit Ol</button>
                        </form>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<script>
function validateRegisterForm() {
    var password = document.getElementById('regPassword').value;
    var confirmPassword = document.getElementById('regConfirmPassword').value;
    var passwordError = document.getElementById('passwordError');
    var confirmPasswordError = document.getElementById('confirmPasswordError');
    var isValid = true;

    // Reset errors
    passwordError.style.display = 'none';
    confirmPasswordError.style.display = 'none';
    document.getElementById('regPassword').classList.remove('is-invalid');
    document.getElementById('regConfirmPassword').classList.remove('is-invalid');

    // Check password length
    if (password.length < 8) {
        passwordError.style.display = 'block';
        document.getElementById('regPassword').classList.add('is-invalid');
        isValid = false;
    }

    // Check password match
    if (password !== confirmPassword) {
        confirmPasswordError.style.display = 'block';
        document.getElementById('regConfirmPassword').classList.add('is-invalid');
        isValid = false;
    }

    return isValid;
}
</script>

            </div>
        </div>
    </div>
</div>
